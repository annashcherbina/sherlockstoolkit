<h1><%= @image.file_name %></h1>


<table cellpadding="2" cellspacing="0" border="0" class="pretty">
    <thead>
    <tr>
        <th>Analysis</th>
        <th>Creator</th>
        <th>Description</th>
        <th>Created At</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><%= @image.image_type %></td>
        <td><%= @image.user_id ? User.find(@image.user_id).name : nil %></td>
        <td><%= simple_format(@image.description) %></td>
        <td><%= local_time(@image.created_at, format: "%A, %B %e, %Y %l:%M%P") %></td>
    </tr>
    </tbody>
</table>

<%# the parameters for the attachment for the image or failing that, the parameters for the associated image of this image %>
<% if @image.associated_attachment_id %>
    <%= render(partial: 'layouts/parameters', locals: {parameters: @parameters} ) %>
<% elsif @image.associated_image_id && @image.associated_image.associated_attachment_id %>
    <%= render(partial: 'layouts/parameters', locals: {parameters: @parameters} ) %>
<% end %>

<p>
    <strong><%= @image.image_type %> Graph</strong>
    <br>
    <%= image_tag(show_img_image_path(@image.id)) %>
    <br>
    <%= link_to("Download #{@image.image_type} Image", download_image_path(@image.id)) %>
    <% if @image.associated_attachment_id %>
    | <%= link_to("Download #{@image.image_type} Data", download_attachment_path(@image.associated_attachment_id)) %>
    <% end %>
</p>
<br>

<%# if this is an image from the mixture or replicate module, then there is always an associated image %>
<% unless @associated_image.nil? %>
    <p>
        <strong><%= "Associated #{@associated_image.image_type} Graph" %></strong>
        <br>
        <%= image_tag(show_img_image_path(@associated_image.id)) %>
        <br>
        <%= link_to("Download #{@image.image_type} Image", download_image_path(@associated_image.id)) %>
        <% if @associated_image.associated_attachment_id %>
        | <%= link_to("Download #{@associated_image.image_type} Data", download_attachment_path(@associated_image.associated_attachment_id)) %>
        <% end %>
    </p>
    <br>
<% end %>

<%# if image is generated by the mixture, replicate, or quality control, display the experimental data for each selected sample %>
<% unless @experiments_details.empty? %>
    <%= render(partial: 'images/experiments_details', locals: {experiments_details: @experiments_details}) %>
    <br>
<% end %>

<br>
<%= link_to('Back to Images Index', images_path) %>